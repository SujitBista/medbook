name: Prevent Direct Push to Main

on:
  push:
    branches:
      - main

jobs:
  block-direct-push:
    name: Block Direct Push to Main
    runs-on: ubuntu-latest
    steps:
      - name: Check if push is from PR
        run: |
          # This workflow will always run, but we'll make it fail
          # Branch protection rules should prevent this, but this is a backup
          echo "‚ùå ERROR: Direct pushes to main branch are not allowed!"
          echo ""
          echo "Branch protection rules should have prevented this push."
          echo "If you see this, please:"
          echo "  1. Create a feature branch: git checkout -b feature/your-feature-name"
          echo "  2. Push to that branch: git push origin feature/your-feature-name"
          echo "  3. Create a Pull Request: gh pr create"
          echo ""
          echo "For emergency hotfixes, use: git checkout -b hotfix/description"
          exit 1
