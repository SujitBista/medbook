---
name: API Design Standards
description: RESTful API design and authentication patterns
globs: ["apps/api/src/routes/**/*.ts", "apps/api/src/controllers/**/*.ts"]
alwaysApply: false
---

# API Design Standards

## RESTful Endpoints

- Use standard HTTP methods: GET, POST, PUT, DELETE, PATCH
- Return consistent response format: `{ success: boolean, data?: T, error?: ErrorResponse }`
- Use appropriate HTTP status codes:
  - 200 OK - Successful GET, PUT, PATCH
  - 201 Created - Successful POST
  - 400 Bad Request - Validation errors
  - 401 Unauthorized - Authentication required
  - 403 Forbidden - Insufficient permissions
  - 404 Not Found - Resource not found
  - 409 Conflict - Resource conflict (e.g., duplicate email)
  - 500 Internal Server Error - Server errors
- Include request validation
- Document endpoints with JSDoc comments

**Example:**

```typescript
/**
 * Register a new user
 * POST /api/v1/auth/register
 */
export async function register(
  req: Request<unknown, unknown, RegisterRequestBody>,
  res: Response,
  next: NextFunction
): Promise<void> {
  try {
    // ... validation and logic ...
    res.status(201).json({
      success: true,
      user: result.user,
      token: result.token,
    });
  } catch (error) {
    next(error);
  }
}
```

## Authentication

- Use JWT tokens for API authentication
- Use NextAuth.js for web authentication
- Protect routes with authentication middleware
- Implement role-based access control (RBAC)
